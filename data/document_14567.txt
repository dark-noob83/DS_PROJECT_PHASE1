The configuration of root guard is on a per-port basis. Root guard does not allow the port to become an STP root port, so the port is always STP-designated. If a better BPDU arrives on this port, root guard does not take the BPDU into account and elect a new STP root. In this way, the root guard enforces the position of the root bridge. The example in this section demonstrates how a rogue root bridge can cause problems on the network and how root guard can help. In Figure 1, Switches A and B comprise the core of the network, and A is the root bridge for a VLAN.
The root guard ensures that the port on which root guard is enabled is the designated port. Normally, root bridge ports are all designated ports, unless two or more ports of the root bridge are connected together. In this way, the root guard enforces the position of the root bridge. The example in this section demonstrates how a rogue root bridge can cause problems on the network and how root guard can help. In Figure 1, Switches A and B comprise the core of the network, and A is the root bridge for a VLAN.
The Spanning Tree Protocol (STP) is an older network protocol that ensures a loop-free topology for any bridged Ethernet local area network. The basic function of STP is to prevent bridge loops and the broadcast radiation that results from them. The root bridge of the spanning tree is the bridge with the smallest (lowest) bridge ID. Each bridge has a configurable priority number and a MAC address; the bridge ID contains both numbers combined together-bridge priority + MAC (32768.0200.0000.1111).
If the bridge receives superior STP Bridge Protocol Data Units (BPDUs) on a root guard-enabled port, root guard moves this port to a root-inconsistent STP state. This root-inconsistent state is effectively equal to a listening state. In this way, the root guard enforces the position of the root bridge. The example in this section demonstrates how a rogue root bridge can cause problems on the network and how root guard can help. In Figure 1, Switches A and B comprise the core of the network, and A is the root bridge for a VLAN.
Root guard and loop guard is basically different purpose. Root guard: It protect undesired switch become a root bridge.So you need to enable this feature in your root bridge ports which is going downstream switch. The root guard ensures that the port on which root guard is enabled is the designated port. Normally, root bridge ports are all designated ports, unless two or more ports of the root bridge are connected together.
BPDU Guard and Root Guard are enhancements to Spanning Tree Protocol (STP) enhancements that improve the reliability of the protocol to unexpected events. Root guard allows the device to participate in STP as long as the device does not try to become the root. If root guard blocks the port, subsequent recovery is automatic. Recovery occurs as soon as the offending device ceases to send superior BPDUs.
Introduction. This document explains the Spanning Tree Protocol (STP) root guard feature. This feature is one of the STP enhancements that Cisco created. This feature enhances switched network reliability, manageability, and security. In this way, the root guard enforces the position of the root bridge. The example in this section demonstrates how a rogue root bridge can cause problems on the network and how root guard can help. In Figure 1, Switches A and B comprise the core of the network, and A is the root bridge for a VLAN.
For example, you could enable Root Guard on SP-side switch interfaces that connect to a customer-side switch. With the Root Guard feature implemented, if a switch outside the SP network becomes the root switch, the interface is put in a blocked state, and spanning tree will select a new root switch. The customer's switch does not become the root switch and is not in the path to the root. With the Root Guard feature, a Layer 2 interface is set as the designated port, and if any device through this port becomes the root bridge, the interface is placed into the blocked (root-inconsistent) state
2) ROOT-GUARD. Root guard for spanning tree can be used to prevent a certain switch from becoming the root bridge. Even if you receive a superior BPDU from another switch, root guard will prevent that switch from becoming the root bridge. Cat-IOS#(config-if)# spanning-tree guard root. Example of this: http://www.cisco.com/en/US/tech/tk389/tk621/technologies_tech_note09186a00800ae96b.shtml. 3). BPDU Guard: We suggest you to enable bpduguard at the global level so that it gets automatically inherited to the port-fast/access port configuation.